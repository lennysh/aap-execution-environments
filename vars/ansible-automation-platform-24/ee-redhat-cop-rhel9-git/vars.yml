---
dest_registry_name: quay.io
rhel_version: rhel9
ansible_core_version: 2.16
image_name: lshirley/ansible-automation-platform-24/ee-redhat-cop-{{ rhel_version | trim }}-git
ee_base_image: registry.redhat.io/ansible-automation-platform/ee-minimal-{{ rhel_version | trim }}:{{ ansible_core_version }}
ee_base_sig_name: registry.redhat.io/ansible-automation-platform/ee-minimal-{{ rhel_version | trim }}:{{ ansible_core_version }}
ee_package_manager_path: /usr/bin/microdnf
# ee_python_interpreter:
#  package_system: "python310"
#  python_path: "/usr/bin/python3.11"
ee_build_files:
  - src: "{{ build_ee_dest_dir }}/ansible.cfg"
    dest: configs
  - src: /home/lshirley/Syncthing/Git_Repos/github.com_lennysh/lennysh-aap_credentials/lennysh-aap_credentials-0.1.0-devel.tar.gz
    dest: collections
ee_bindep:
  - python3.11-devel [platform:rpm]
  - pkg-config [platform:rpm]
  - systemd-devel [platform:rpm]
  - gcc [platform:rpm]
ee_python:
  - psycopg2-binary
ee_collections:
  - name: https://github.com/redhat-cop/infra.controller_configuration.git  # infra.controller_configuration
    type: git
    version: devel
  - name: ansible.controller
    version: "'>=4.5.0,<4.6.0'"
  - name: https://github.com/redhat-cop/infra.support_assist.git            # ansible.eda
    type: git
    version: devel
  - name: ansible.platform                                                  # ansible.platform
    version: "'>=2.6,<2.7'"
  - /etc/ansible/lennysh-aap_credentials-0.1.0-devel.tar.gz                 # lennysh.aap_credentials
  # - name: https://github.com/ansible-collections/ansible_hub.git          # ansible.hub
  #   type: git
  #   version: main
# ee_prepend_base:
#   - RUN microdnf upgrade -y
ee_prepend_galaxy:
  - ADD _build/configs/ansible.cfg /etc/ansible/ansible.cfg
  - ADD _build/collections/lennysh-aap_credentials-0.1.0-devel.tar.gz /etc/ansible/lennysh-aap_credentials-0.1.0-devel.tar.gz
# ee_prepend_builder:
#   -
# ee_prepend_final:
#   -
ee_append_final:
  - RUN microdnf reinstall tzdata -y
  - RUN rm -f /etc/ansible/ansible.cfg
  - RUN microdnf clean all
  - RUN curl -L -o /usr/local/bin/yq https://github.com/mikefarah/yq/releases/latest/download/yq_linux_amd64 && chmod +x /usr/local/bin/yq
